containers:
  default:
    includes_source: false
    environment: build
    workdir: /build/truffleruby-shopify
    build:
      env:
        PIPA_PIPELINE_TEMPLATE: dockerfile
        PIPA_DOCKERFILE: .shopify-build/Dockerfile.debian

steps:
  - label: "Build TruffleRuby on Debian"
    high_cpu: true
    timeout: 90m
    artifact_paths:
      - /build/artifacts
    run:
      - cd /build
      - ./build-linux.sh
